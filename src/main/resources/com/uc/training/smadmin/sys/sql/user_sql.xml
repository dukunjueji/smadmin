<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="com.uc.training.smadmin.sys.dao.SysUserDao">

    <!-- 根据用户账号密码查询登录用户 -->
    <select id="getUserLogin" parameterClass="com.uc.training.smadmin.sys.vo.UserLoginVO" resultClass="com.uc.training.smadmin.sys.model.SysUser">
        SELECT
           u.id AS	id,
           u.username AS username,
           u.password AS password,
           u.create_time AS	createTime,
           u.modify_time AS	modifyTime
        FROM
          t_sys_user u
        <dynamic prepend="where">
            <isNotNull property="username" prepend="and">
                username = #username#
            </isNotNull>
            <isNotNull property="password" prepend="and">
                password = #password#
            </isNotNull>
        </dynamic>
    </select>

    <select id="getById" parameterClass="java.lang.Long" resultClass="com.uc.training.smadmin.sys.model.SysUser">
        SELECT
            u.id AS	id,
            u.username AS username,
            u.password AS password,
            u.is_admin AS isAdmin,
            u.create_time AS createTime,
            u.modify_time AS modifyTime
        FROM
          t_sys_user u
        WHERE
          id = #id#
    </select>

    <update id="updatePassword" parameterClass="com.uc.training.smadmin.sys.model.SysUser">
        UPDATE
          t_sys_user
        SET
          password = #password#,
          modify_time = NOW(),
          modify_emp = #modifyEmp#
        WHERE
          id = #id#
    </update>
</sqlMap>
