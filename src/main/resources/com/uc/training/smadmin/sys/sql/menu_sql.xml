<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="com.uc.training.smadmin.sys.dao.SysMenuDao">

    <!-- 根据用户id获取用户权限标识 -->
    <select id="getUserPerms" resultClass="java.lang.String" parameterClass="java.lang.Long">
        SELECT
			DISTINCT(m.rel)
		FROM
			t_sys_menu m,t_sys_user_role ur,t_sys_role_menu rm
		WHERE
			ur.role_id = rm.role_id
		AND
			rm.menu_id = m.id
		AND
			ur.user_id = #userId#
    </select>

	<!-- 获取所有的菜单 -->
	<select id="getMenuList" resultClass="com.uc.training.smadmin.sys.model.SysMenu">
		SELECT
		 m.id AS id,
		 m.name AS name,
		 m.type AS type,
		 m.level AS level,
		 m.parent_id AS parentId,
		 m.sort_num AS sortNum,
		 m.url AS url,
		 m.rel AS rel
		FROM t_sys_menu m
	</select>
</sqlMap>
